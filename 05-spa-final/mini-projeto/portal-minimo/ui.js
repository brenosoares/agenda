import { state, toggleFavorito } from './state.js'; import { navigate } from './router.js'; const app = () => document.getElementById('app'); const navEl = () => document.getElementById('nav'); const toastEl = () => document.getElementById('toast'); export function renderNav(current) { const routes = [ { path: '/', label: 'Home' }, { path: '/cursos', label: 'Cursos' }, { path: '/favoritos', label: 'Favoritos' }, { path: '/sobre', label: 'Sobre' } ]; navEl().innerHTML = ''; routes.forEach(r => { const a = document.createElement('a'); a.href = r.path; a.textContent = r.label; if (r.path === current) a.classList.add('active'); a.addEventListener('click', e => { e.preventDefault(); navigate(r.path); }); navEl().append(a); }); } export function renderHome() { app().innerHTML = `<h1>Bem-vindo</h1><p>Portal mínimo demonstrando rotas, favoritos e tema.</p>`; } export function renderCursos() { app().innerHTML = '<h1>Cursos</h1>'; const grid = document.createElement('div'); grid.className = 'grid'; state.cursos.forEach(c => { const card = document.createElement('article'); card.className = 'card'; const fav = state.favoritos.has(c.id); card.innerHTML = `<h3>${c.titulo}</h3><p style="font-size:.65rem;letter-spacing:.3px;opacity:.7">${c.categoria}</p><div style="margin-top:auto;display:flex;gap:.5rem;"><button data-id="${c.id}" class="ghost">${fav ? '★' : '☆'}</button><button data-view="${c.id}">Ver</button></div>`; grid.append(card); }); app().append(grid); grid.addEventListener('click', e => { const id = e.target.getAttribute('data-id'); if (id) { toggleFavorito(id); showToast('Favoritos atualizados'); renderCursos(); } const view = e.target.getAttribute('data-view'); if (view) navigate(`/curso/${view}`); }); } export function renderCurso(id) { const curso = state.cursos.find(c => c.id === id); if (!curso) { app().innerHTML = `<p>Curso não encontrado.</p>`; return; } const fav = state.favoritos.has(curso.id); app().innerHTML = `<a href="/cursos" data-back>&larr; Voltar</a><h1>${curso.titulo}</h1><p><strong>Categoria:</strong> ${curso.categoria}</p><button id="favBtn">${fav ? 'Remover dos Favoritos' : 'Favoritar'}</button>`; app().querySelector('[data-back]').addEventListener('click', e => { e.preventDefault(); navigate('/cursos'); }); document.getElementById('favBtn').addEventListener('click', () => { toggleFavorito(curso.id); showToast('Atualizado'); renderCurso(id); }); } export function renderFavoritos() { app().innerHTML = '<h1>Favoritos</h1>'; const favs = [...state.favoritos]; if (!favs.length) { app().innerHTML += '<p>Nenhum favorito ainda.</p>'; return; } const list = document.createElement('ul'); favs.forEach(id => { const curso = state.cursos.find(c => c.id === id); if (!curso) return; const li = document.createElement('li'); li.innerHTML = `<a href="/curso/${id}" data-go="${id}">${curso.titulo}</a>`; list.append(li); }); app().append(list); list.addEventListener('click', e => { const go = e.target.getAttribute('data-go'); if (go) { e.preventDefault(); navigate(`/curso/${go}`); } }); } export function renderSobre() { app().innerHTML = `<h1>Sobre</h1><p>Exemplo educacional de SPA sem frameworks.</p><p>Recursos: rotas, estado, favoritos, tema.</p>`; } export function showToast(msg, ms = 2000) { const t = toastEl(); t.textContent = msg; t.classList.add('visible'); setTimeout(() => t.classList.remove('visible'), ms); }